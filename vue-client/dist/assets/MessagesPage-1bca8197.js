import{f as i,l as M,o as d,c as r,a as e,e as h,j as m,t as c,F as x,m as w,h as p,n as k,v as E}from"./index-e3c589d7.js";import{u as N}from"./useApi-0fdb8b38.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-78d57de0.js";const G={class:"messages-page container mt-4"},L={class:"card"},P={class:"card-body"},R={class:"d-flex justify-content-between align-items-center mb-4"},V=["disabled"],A={key:0,class:"text-center my-4"},C={key:1,class:"alert alert-danger"},D={key:2,class:"alert alert-info"},F={class:"message-list"},T={class:"card-body"},U={class:"d-flex justify-content-between"},j={class:"card-subtitle mb-2 text-muted"},B={class:"card-text"},I={class:"text-end"},O={class:"badge bg-primary"},Y={class:"card mt-4"},q={class:"card-body"},z={class:"mb-3"},H={class:"mb-3"},J=["disabled"],K={__name:"MessagesPage",setup(Q){const{getMessages:_,sendMessage:g}=N(),u=i([]),o=i(!1),l=i(""),n=i({type:"GENERAL",content:""});M(()=>{v()});const v=async()=>{var a,s;try{o.value=!0,l.value="";const t=await _();u.value=t.data||[]}catch(t){l.value="Failed to load messages: "+(((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.message)}finally{o.value=!1}},b=()=>{v()},y=async()=>{var a,s;try{o.value=!0,l.value="";const t=await g({type:n.value.type,content:n.value.content});n.value.content="",await v()}catch(t){l.value="Failed to send message: "+(((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.message)}finally{o.value=!1}},f=a=>a?new Date(a).toLocaleString():"Unknown time";return(a,s)=>(d(),r("div",G,[s[9]||(s[9]=e("h2",{class:"mb-4"},"Messages",-1)),e("div",L,[e("div",P,[e("div",R,[s[3]||(s[3]=e("h5",{class:"card-title mb-0"},"Your Messages",-1)),e("button",{onClick:b,class:"btn btn-outline-primary",disabled:o.value},[...s[2]||(s[2]=[e("i",{class:"bi bi-arrow-clockwise"},null,-1),h(" Refresh ",-1)])],8,V)]),o.value?(d(),r("div",A,[...s[4]||(s[4]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)])])):m("",!0),l.value?(d(),r("div",C,c(l.value),1)):m("",!0),!o.value&&u.value.length===0?(d(),r("div",D," No messages found. ")):m("",!0),e("div",F,[(d(!0),r(x,null,w(u.value,t=>(d(),r("div",{key:t.id,class:"card mb-3 message-card"},[e("div",T,[e("div",U,[e("div",null,[e("h6",j,c(f(t.timestamp)),1),e("p",B,c(t.content),1)]),e("div",I,[e("span",O,c(t.type),1)])])])]))),128))])])]),e("div",Y,[e("div",q,[s[8]||(s[8]=e("h5",{class:"card-title"},"Send Message",-1)),e("div",z,[s[6]||(s[6]=e("label",{class:"form-label"},"Message Type",-1)),p(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>n.value.type=t),class:"form-select"},[...s[5]||(s[5]=[e("option",{value:"GENERAL"},"General",-1),e("option",{value:"GAME"},"Game Related",-1),e("option",{value:"SUPPORT"},"Support",-1)])],512),[[k,n.value.type]])]),e("div",H,[s[7]||(s[7]=e("label",{class:"form-label"},"Content",-1)),p(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=t=>n.value.content=t),class:"form-control",rows:"3",placeholder:"Enter your message..."},null,512),[[E,n.value.content]])]),e("button",{onClick:y,class:"btn btn-primary",disabled:o.value||!n.value.content.trim()}," Send Message ",8,J)])])]))}},ee=S(K,[["__scopeId","data-v-3936c6dd"]]);export{ee as default};
//# sourceMappingURL=MessagesPage-1bca8197.js.map
