{"version":3,"file":"MessagesPage-5f68468a.js","sources":["../../src/pages/MessagesPage.vue"],"sourcesContent":["<template>\n  <div class=\"messages-page container mt-4\">\n    <h2 class=\"mb-4\">Messages</h2>\n    \n    <div class=\"card\">\n      <div class=\"card-body\">\n        <div class=\"d-flex justify-content-between align-items-center mb-4\">\n          <h5 class=\"card-title mb-0\">Your Messages</h5>\n          <button @click=\"refreshMessages\" class=\"btn btn-outline-primary\" :disabled=\"loading\">\n            <i class=\"bi bi-arrow-clockwise\"></i> Refresh\n          </button>\n        </div>\n        \n        <div v-if=\"loading\" class=\"text-center my-4\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n        \n        <div v-if=\"error\" class=\"alert alert-danger\">\n          {{ error }}\n        </div>\n        \n        <div v-if=\"!loading && messages.length === 0\" class=\"alert alert-info\">\n          No messages found.\n        </div>\n        \n        <!-- Message List -->\n        <div class=\"message-list\">\n          <div v-for=\"message in messages\" :key=\"message.id\" class=\"card mb-3 message-card\">\n            <div class=\"card-body\">\n              <div class=\"d-flex justify-content-between\">\n                <div>\n                  <h6 class=\"card-subtitle mb-2 text-muted\">\n                    {{ formatDate(message.timestamp) }}\n                  </h6>\n                  <p class=\"card-text\">{{ message.content }}</p>\n                </div>\n                <div class=\"text-end\">\n                  <span class=\"badge bg-primary\">\n                    {{ message.type }}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Send Message Section -->\n    <div class=\"card mt-4\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Send Message</h5>\n        \n        <div class=\"mb-3\">\n          <label class=\"form-label\">Message Type</label>\n          <select v-model=\"newMessage.type\" class=\"form-select\">\n            <option value=\"GENERAL\">General</option>\n            <option value=\"GAME\">Game Related</option>\n            <option value=\"SUPPORT\">Support</option>\n          </select>\n        </div>\n        \n        <div class=\"mb-3\">\n          <label class=\"form-label\">Content</label>\n          <textarea \n            v-model=\"newMessage.content\" \n            class=\"form-control\" \n            rows=\"3\" \n            placeholder=\"Enter your message...\"\n          ></textarea>\n        </div>\n        \n        <button \n          @click=\"sendMessageNow\" \n          class=\"btn btn-primary\" \n          :disabled=\"loading || !newMessage.content.trim()\"\n        >\n          Send Message\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useApi } from '@/composables/useApi'\n\nconst { getMessages, sendMessage } = useApi()\n\nconst messages = ref([])\nconst loading = ref(false)\nconst error = ref('')\n\nconst newMessage = ref({\n  type: 'GENERAL',\n  content: ''\n})\n\nonMounted(() => {\n  loadMessages()\n})\n\nconst loadMessages = async () => {\n  try {\n    loading.value = true\n    error.value = ''\n    \n    const response = await getMessages()\n    messages.value = response.data || []\n    \n  } catch (err) {\n    error.value = 'Failed to load messages: ' + (err.response?.data?.message || err.message)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst refreshMessages = () => {\n  loadMessages()\n}\n\nconst sendMessageNow = async () => {\n  try {\n    loading.value = true\n    error.value = ''\n    \n    const response = await sendMessage({\n      type: newMessage.value.type,\n      content: newMessage.value.content\n    })\n    \n    // Clear form\n    newMessage.value.content = ''\n    \n    // Refresh messages\n    await loadMessages()\n    \n  } catch (err) {\n    error.value = 'Failed to send message: ' + (err.response?.data?.message || err.message)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return 'Unknown time'\n  \n  const date = new Date(timestamp)\n  return date.toLocaleString()\n}\n</script>\n\n<style scoped>\n.messages-page {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.message-card {\n  transition: transform 0.2s, box-shadow 0.2s;\n  cursor: pointer;\n}\n\n.message-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.message-list {\n  max-height: 500px;\n  overflow-y: auto;\n}\n</style>"],"names":["getMessages","sendMessage","useApi","messages","ref","loading","error","newMessage","onMounted","loadMessages","response","err","_b","_a","refreshMessages","sendMessageNow","formatDate","timestamp","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_Fragment","_renderList","message","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","$event","_vModelSelect","_hoisted_19","_vModelText","_hoisted_20"],"mappings":"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"}