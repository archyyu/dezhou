import{u as _,f as m,r as b,o as n,c as i,a as t,g as y,h as d,v as u,t as w,j as k,e as p,b as R,w as x}from"./index-02cc848c.js";import{u as S}from"./useApi-0fdb8b38.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-78d57de0.js";const h={class:"register-page"},V={class:"row justify-content-center"},I={class:"col-md-6 col-lg-4"},J={class:"card shadow"},O={class:"card-body p-4"},P={class:"mb-3"},U={class:"mb-3"},A={class:"mb-3"},B={class:"mb-3"},C=["disabled"],E={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},j={key:1},q={key:0,class:"alert alert-danger mt-3"},D={class:"text-center mt-3"},M={class:"mb-0"},T={__name:"RegisterPage",setup(F){const c=_(),{register:v}=S(),a=m({account:"",password:"",email:"",name:""}),l=m(!1),r=m(""),f=async()=>{try{l.value=!0,r.value="";const s=await v({name:a.value.account,password:a.value.password,email:a.value.email,gendar:"male",birthday:"1990-01-01"});if(console.log("Registration response:",s.data),s.data&&s.data.success&&s.data.data)localStorage.setItem("token",s.data.data.token),localStorage.setItem("user",JSON.stringify(s.data.data.user)),c.push("/rooms");else if(s.data&&s.data.token)localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),c.push("/rooms");else throw new Error("Registration failed: "+JSON.stringify(s.data))}catch(s){console.error("Registration error:",s),s.response&&s.response.data?r.value=s.response.data.message||"Registration failed: "+JSON.stringify(s.response.data):s.message?r.value=s.message:r.value="Registration failed: "+s}finally{l.value=!1}};return(s,e)=>{const g=b("router-link");return n(),i("div",h,[t("div",V,[t("div",I,[t("div",J,[t("div",O,[e[10]||(e[10]=t("h2",{class:"card-title text-center mb-4"},"Register",-1)),t("form",{onSubmit:y(f,["prevent"])},[t("div",P,[e[4]||(e[4]=t("label",{for:"account",class:"form-label"},"Account",-1)),d(t("input",{type:"text",class:"form-control",id:"account","onUpdate:modelValue":e[0]||(e[0]=o=>a.value.account=o),required:""},null,512),[[u,a.value.account]])]),t("div",U,[e[5]||(e[5]=t("label",{for:"password",class:"form-label"},"Password",-1)),d(t("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>a.value.password=o),required:""},null,512),[[u,a.value.password]])]),t("div",A,[e[6]||(e[6]=t("label",{for:"email",class:"form-label"},"Email",-1)),d(t("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.email=o)},null,512),[[u,a.value.email]])]),t("div",B,[e[7]||(e[7]=t("label",{for:"name",class:"form-label"},"Full Name",-1)),d(t("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":e[3]||(e[3]=o=>a.value.name=o)},null,512),[[u,a.value.name]])]),t("button",{type:"submit",class:"btn btn-primary w-100",disabled:l.value},[l.value?(n(),i("span",E)):(n(),i("span",j,"Register"))],8,C),r.value?(n(),i("div",q,w(r.value),1)):k("",!0)],32),t("div",D,[t("p",M,[e[9]||(e[9]=p("Already have an account? ",-1)),R(g,{to:"/login"},{default:x(()=>[...e[8]||(e[8]=[p("Login",-1)])]),_:1})])])])])])])])}}},K=N(T,[["__scopeId","data-v-64b2b5d8"]]);export{K as default};
//# sourceMappingURL=RegisterPage-099ca4c8.js.map
