{"version":3,"file":"RegisterPage-e6454299.js","sources":["../../src/pages/RegisterPage.vue"],"sourcesContent":["<template>\n  <div class=\"register-page\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-6 col-lg-4\">\n        <div class=\"card shadow\">\n          <div class=\"card-body p-4\">\n            <h2 class=\"card-title text-center mb-4\">Register</h2>\n            \n            <form @submit.prevent=\"handleRegister\">\n              <div class=\"mb-3\">\n                <label for=\"account\" class=\"form-label\">Account</label>\n                <input \n                  type=\"text\" \n                  class=\"form-control\" \n                  id=\"account\" \n                  v-model=\"form.account\" \n                  required\n                >\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"password\" class=\"form-label\">Password</label>\n                <input \n                  type=\"password\" \n                  class=\"form-control\" \n                  id=\"password\" \n                  v-model=\"form.password\" \n                  required\n                >\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label\">Email</label>\n                <input \n                  type=\"email\" \n                  class=\"form-control\" \n                  id=\"email\" \n                  v-model=\"form.email\"\n                >\n              </div>\n              \n              <div class=\"mb-3\">\n                <label for=\"name\" class=\"form-label\">Full Name</label>\n                <input \n                  type=\"text\" \n                  class=\"form-control\" \n                  id=\"name\" \n                  v-model=\"form.name\"\n                >\n              </div>\n              \n              <button type=\"submit\" class=\"btn btn-primary w-100\" :disabled=\"loading\">\n                <span v-if=\"loading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                <span v-else>Register</span>\n              </button>\n              \n              <div v-if=\"error\" class=\"alert alert-danger mt-3\">\n                {{ error }}\n              </div>\n            </form>\n            \n            <div class=\"text-center mt-3\">\n              <p class=\"mb-0\">Already have an account? <router-link to=\"/login\">Login</router-link></p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useApi } from '@/composables/useApi'\n\nconst router = useRouter()\nconst { register } = useApi()\n\nconst form = ref({\n  account: '',\n  password: '',\n  email: '',\n  name: ''\n})\n\nconst loading = ref(false)\nconst error = ref('')\n\nconst handleRegister = async () => {\n  try {\n    loading.value = true\n    error.value = ''\n    \n    const response = await register({\n      name: form.value.account,\n      password: form.value.password,\n      email: form.value.email,\n      // Additional registration fields\n      gendar: 'male',\n      birthday: '1990-01-01'\n    })\n    \n    console.log('Registration response:', response.data)\n    \n    // Handle the API response format correctly\n    if (response.data && response.data.success && response.data.data) {\n      // New API response format\n      localStorage.setItem('token', response.data.data.token)\n      localStorage.setItem('user', JSON.stringify(response.data.data.user))\n      \n      // Redirect to rooms after successful registration\n      router.push('/rooms')\n    } else if (response.data && response.data.token) {\n      // Legacy response format\n      localStorage.setItem('token', response.data.token)\n      localStorage.setItem('user', JSON.stringify(response.data.user))\n      \n      // Redirect to rooms after successful registration\n      router.push('/rooms')\n    } else {\n      throw new Error('Registration failed: ' + JSON.stringify(response.data))\n    }\n    \n  } catch (err) {\n    console.error('Registration error:', err)\n    if (err.response && err.response.data) {\n      error.value = err.response.data.message || 'Registration failed: ' + JSON.stringify(err.response.data)\n    } else if (err.message) {\n      error.value = err.message\n    } else {\n      error.value = 'Registration failed: ' + err\n    }\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n\n<style scoped>\n.register-page {\n  min-height: 70vh;\n  display: flex;\n  align-items: center;\n}\n\n.card {\n  border: none;\n}\n</style>"],"names":["router","useRouter","register","useApi","form","ref","loading","error","handleRegister","response","err","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_cache","_hoisted_6","$event","_vModelText","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_11","_hoisted_13","_toDisplayString","_hoisted_14","_hoisted_15","_createVNode","_component_router_link"],"mappings":"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"}