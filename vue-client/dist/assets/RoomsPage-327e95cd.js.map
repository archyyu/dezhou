{"version":3,"file":"RoomsPage-327e95cd.js","sources":["../../src/pages/RoomsPage.vue"],"sourcesContent":["<template>\n  <div class=\"rooms-page container mt-4\">\n    <h2 class=\"mb-4\">Game Rooms</h2>\n    \n    <!-- Room Type Filter -->\n    <div class=\"card mb-4\">\n      <div class=\"card-body\">\n        <div class=\"d-flex justify-content-between align-items-center mb-3\">\n          <h5 class=\"card-title mb-0\">Room Types</h5>\n          <button @click=\"createRoomNow\" class=\"btn btn-success\" :disabled=\"loading\">\n            Create Room\n          </button>\n        </div>\n        \n        <div class=\"room-types mb-3\">\n          <button \n            v-for=\"roomType in roomTypes\" \n            :key=\"roomType.id\" \n            @click=\"selectRoomType(roomType.id)\" \n            class=\"btn me-2 mb-2\" \n            :class=\"{\n              'btn-primary': selectedRoomType === roomType.id,\n              'btn-outline-primary': selectedRoomType !== roomType.id\n            }\"\n          >\n            {{ roomType.name }} ({{ roomTypeCount[roomType.id] || 0 }})\n          </button>\n        </div>\n        \n        <div v-if=\"loadingRoomTypes\" class=\"text-center\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Room List -->\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Available Rooms</h5>\n        \n        <div v-if=\"loadingRooms\" class=\"text-center my-4\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">Loading...</span>\n          </div>\n        </div>\n        \n        <div v-if=\"error\" class=\"alert alert-danger\">\n          {{ error }}\n        </div>\n        \n        <div v-if=\"!loadingRooms && rooms.length === 0\" class=\"alert alert-info\">\n          No rooms available for this type. Create one!\n        </div>\n        \n        <div class=\"room-list\">\n          <div v-for=\"room in rooms\" :key=\"room.roomid\" class=\"card mb-3 room-card\">\n            <div class=\"card-body\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <div>\n                  <h5 class=\"card-title mb-1\">{{ room.name }}</h5>\n                  <p class=\"card-text mb-1\">\n                    <span class=\"badge bg-secondary me-2\">{{ room.roomTypeName }}</span>\n                    <span class=\"text-muted\">Players: {{ 1 }} / {{ room.maxPlayers }}</span>\n                  </p>\n                </div>\n                <div>\n                  <button \n                    @click=\"joinRoomNow(room.roomid)\" \n                    class=\"btn btn-primary btn-sm\" \n                    :disabled=\"loading || 1 >= room.maxPlayers\"\n                  >\n                    {{ 1 >= room.maxPlayers ? 'Full' : 'Join' }}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Create Room Modal -->\n    <div class=\"modal fade\" id=\"createRoomModal\" tabindex=\"-1\" aria-labelledby=\"createRoomModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"createRoomModalLabel\">Create New Room</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Room Type</label>\n              <select v-model=\"newRoomTypeId\" class=\"form-select\">\n                <option v-for=\"roomType in roomTypes\" :key=\"roomType.id\" :value=\"roomType.id\">\n                  {{ roomType.name }}\n                </option>\n              </select>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Room Name</label>\n              <input v-model=\"newRoomName\" type=\"text\" class=\"form-control\" placeholder=\"My Poker Room\">\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"confirmCreateRoom\" :disabled=\"loading\">\n              Create Room\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useApi } from '@/composables/useApi'\nimport { Modal } from 'bootstrap'\n\nconst { getRoomTypeList, getRoomsByType, createRoom, joinRoom } = useApi()\nconst router = useRouter()\n\nconst roomTypes = ref([])\nconst rooms = ref([])\nconst selectedRoomType = ref(null)\nconst loadingRoomTypes = ref(false)\nconst loadingRooms = ref(false)\nconst loading = ref(false)\nconst error = ref('')\n\n// Create room modal state\nconst newRoomTypeId = ref(null)\nconst newRoomName = ref('')\nlet createRoomModal = null\n\n// Room type counts\nconst roomTypeCount = computed(() => {\n  const counts = {}\n  console.log(rooms)\n  rooms.value.forEach(room => {\n    counts[room.roomTypeId] = (counts[room.roomTypeId] || 0) + 1\n  })\n  return counts\n})\n\n// Load room types on mount\nonMounted(async () => {\n  await loadRoomTypes()\n  createRoomModal = new Modal(document.getElementById('createRoomModal'))\n})\n\nconst loadRoomTypes = async () => {\n  try {\n    loadingRoomTypes.value = true\n    error.value = ''\n    const response = await getRoomTypeList()\n    roomTypes.value = response.data.data\n    \n    // Select first room type by default\n    if (roomTypes.value.length > 0) {\n      selectRoomType(roomTypes.value[0].id)\n    }\n  } catch (err) {\n    error.value = 'Failed to load room types: ' + (err.response?.data?.message || err.message)\n  } finally {\n    loadingRoomTypes.value = false\n  }\n}\n\nconst selectRoomType = async (roomTypeId) => {\n  selectedRoomType.value = roomTypeId\n  await loadRoomsForType(roomTypeId)\n}\n\nconst loadRoomsForType = async (roomTypeId) => {\n  try {\n    loadingRooms.value = true\n    error.value = ''\n    rooms.value = []\n    const response = await getRoomsByType(roomTypeId)\n    rooms.value = response.data.data\n    console.log(rooms)\n  } catch (err) {\n    error.value = 'Failed to load rooms: ' + (err.response?.data?.message || err.message)\n  } finally {\n    loadingRooms.value = false\n  }\n}\n\nconst createRoomNow = () => {\n  if (roomTypes.value.length > 0) {\n    newRoomTypeId.value = roomTypes.value[0].id\n    newRoomName.value = `Room ${Math.floor(Math.random() * 1000)}`\n    createRoomModal.show()\n  }\n}\n\nconst confirmCreateRoom = async () => {\n  try {\n    loading.value = true\n    error.value = ''\n    \n    const response = await createRoom(newRoomTypeId.value, newRoomName.value)\n    \n    // Refresh room list\n    await loadRoomsForType(selectedRoomType.value)\n    \n    // Close modal\n    createRoomModal.hide()\n  } catch (err) {\n    error.value = 'Failed to create room: ' + (err.response?.data?.message || err.message)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst joinRoomNow = async (roomId) => {\n  try {\n    loading.value = true\n    error.value = ''\n    \n    const response = await joinRoom(roomId)\n    \n    // Navigate to game page\n    router.push({ name: 'game', params: { roomId } })\n  } catch (err) {\n    error.value = 'Failed to join room: ' + (err.response?.data?.message || err.message)\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n\n<style scoped>\n.rooms-page {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.room-card {\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.room-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.room-types {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n</style>"],"names":["getRoomTypeList","getRoomsByType","createRoom","joinRoom","useApi","router","useRouter","roomTypes","ref","rooms","selectedRoomType","loadingRoomTypes","loadingRooms","loading","error","newRoomTypeId","newRoomName","createRoomModal","roomTypeCount","computed","counts","room","onMounted","loadRoomTypes","Modal","response","selectRoomType","err","_b","_a","roomTypeId","loadRoomsForType","createRoomNow","confirmCreateRoom","joinRoomNow","roomId","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","roomType","$event","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30"],"mappings":"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"}