{"version":3,"file":"useApi-0fdb8b38.js","sources":["../../src/composables/useApi.js"],"sourcesContent":["import axios from 'axios'\n\n/**\n * API composable for making HTTP requests to the backend\n */\nexport function useApi() {\n  // Create axios instance\n  const apiBaseURL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080'\n  console.log('API Base URL:', apiBaseURL) // Debug logging\n  \n  const api = axios.create({\n    baseURL: apiBaseURL,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n\n  // Add request interceptor for authentication\n  api.interceptors.request.use(config => {\n    const token = localStorage.getItem('token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    return config\n  })\n\n  // Add response interceptor for error handling\n  api.interceptors.response.use(\n    response => response,\n    error => {\n      if (error.response?.status === 401) {\n        // Handle unauthorized access\n        localStorage.removeItem('token')\n        localStorage.removeItem('user')\n        window.location.href = '/login'\n      }\n      return Promise.reject(error)\n    }\n  )\n\n  return {\n    // Authentication\n    login: (credentials) => api.post('/api/v1/user/login', null, { params: credentials }),\n    register: (userData) => api.post('/api/v1/user/register', null, { params: userData }),\n    \n    // Room management\n    getRoomTypeList: () => api.get('/api/v1/room/roomTypeList'),\n    getRoomsByType: (roomTypeId) => api.get(`/api/v1/room/${roomTypeId}/list`),\n    getAllRooms: () => api.get('/api/v1/room/list'),\n    joinRoom: (roomId) => api.post(`/api/v1/room/${roomId}/join`),\n    leaveRoom: (roomId) => api.post(`/api/v1/room/${roomId}/leave`),\n    createRoom: (roomTypeId, roomName) => api.post(`/api/v1/room/create/${roomTypeId}/${roomName}`),\n    \n    // Game actions\n    gameAction: (roomId, cmd, additionalParams) => api.post(`/api/v1/game/${roomId}/actions`, additionalParams, { \n      params: { cmd }\n    }),\n    \n    // User\n    getUserProfile: (uid) => api.get(`/api/v1/user/info/${uid}`),\n    updateProfile: (profileData) => api.put('/api/v1/user/profile', null, { \n      params: { ...profileData }\n    }),\n    \n    // Message handling\n    getMessages: () => api.get('/api/v1/user/messages'),\n    sendMessage: (message) => api.post('/api/v1/user/messages', message),\n    \n    // Generic methods\n    get: (url) => api.get(url),\n    post: (url, data) => api.post(url, data),\n    put: (url, data) => api.put(url, data),\n    delete: (url) => api.delete(url)\n  }\n}"],"names":["useApi","apiBaseURL","api","axios","config","token","response","error","_a","credentials","userData","roomTypeId","roomId","roomName","cmd","additionalParams","uid","profileData","message","url","data"],"mappings":"wCAKO,SAASA,GAAS,CAEvB,MAAMC,EAAa,wBACnB,QAAQ,IAAI,gBAAiBA,CAAU,EAEvC,MAAMC,EAAMC,EAAM,OAAO,CACvB,QAASF,EACT,QAAS,CACP,eAAgB,kBACjB,CACL,CAAG,EAGD,OAAAC,EAAI,aAAa,QAAQ,IAAIE,GAAU,CACrC,MAAMC,EAAQ,aAAa,QAAQ,OAAO,EAC1C,OAAIA,IACFD,EAAO,QAAQ,cAAgB,UAAUC,CAAK,IAEzCD,CACX,CAAG,EAGDF,EAAI,aAAa,SAAS,IACxBI,GAAYA,EACZC,GAAS,OACP,QAAIC,EAAAD,EAAM,WAAN,YAAAC,EAAgB,UAAW,MAE7B,aAAa,WAAW,OAAO,EAC/B,aAAa,WAAW,MAAM,EAC9B,OAAO,SAAS,KAAO,UAElB,QAAQ,OAAOD,CAAK,CAC5B,CACF,EAEM,CAEL,MAAQE,GAAgBP,EAAI,KAAK,qBAAsB,KAAM,CAAE,OAAQO,EAAa,EACpF,SAAWC,GAAaR,EAAI,KAAK,wBAAyB,KAAM,CAAE,OAAQQ,EAAU,EAGpF,gBAAiB,IAAMR,EAAI,IAAI,2BAA2B,EAC1D,eAAiBS,GAAeT,EAAI,IAAI,gBAAgBS,CAAU,OAAO,EACzE,YAAa,IAAMT,EAAI,IAAI,mBAAmB,EAC9C,SAAWU,GAAWV,EAAI,KAAK,gBAAgBU,CAAM,OAAO,EAC5D,UAAYA,GAAWV,EAAI,KAAK,gBAAgBU,CAAM,QAAQ,EAC9D,WAAY,CAACD,EAAYE,IAAaX,EAAI,KAAK,uBAAuBS,CAAU,IAAIE,CAAQ,EAAE,EAG9F,WAAY,CAACD,EAAQE,EAAKC,IAAqBb,EAAI,KAAK,gBAAgBU,CAAM,WAAYG,EAAkB,CAC1G,OAAQ,CAAE,IAAAD,CAAK,CACrB,CAAK,EAGD,eAAiBE,GAAQd,EAAI,IAAI,qBAAqBc,CAAG,EAAE,EAC3D,cAAgBC,GAAgBf,EAAI,IAAI,uBAAwB,KAAM,CACpE,OAAQ,CAAE,GAAGe,CAAa,CAChC,CAAK,EAGD,YAAa,IAAMf,EAAI,IAAI,uBAAuB,EAClD,YAAcgB,GAAYhB,EAAI,KAAK,wBAAyBgB,CAAO,EAGnE,IAAMC,GAAQjB,EAAI,IAAIiB,CAAG,EACzB,KAAM,CAACA,EAAKC,IAASlB,EAAI,KAAKiB,EAAKC,CAAI,EACvC,IAAK,CAACD,EAAKC,IAASlB,EAAI,IAAIiB,EAAKC,CAAI,EACrC,OAASD,GAAQjB,EAAI,OAAOiB,CAAG,CAChC,CACH"}