import{a as d,u as f}from"./useApi-49c977da.js";function g(){const e=d(),{getUserProfile:o}=f(),a=async(t=!1)=>{var s,n;if(!t&&e.user)return e.user;if(e.token)try{e.setLoading(!0),e.setError(null);const r=await o();if(r.data)return e.setUser(r.data),r.data}catch(r){return e.setError(((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.message)||r.message||"Failed to fetch user"),console.error("Failed to get current user:",r),null}finally{e.setLoading(!1)}return e.user},u=(t,s)=>{e.initializeFromSession(t,s)},i=()=>{e.clearAuth()},l=()=>e.token,c=t=>{e.updateUserProfile(t)};return{user:e.currentUser,token:e.authToken,loading:e.loading,error:e.error,isAuthenticated:e.isAuth,getCurrentUser:a,initializeAuth:u,clearAuth:i,getToken:l,updateProfile:c,authStore:e}}export{g as u};
//# sourceMappingURL=useAuth-174606a9.js.map
